import{c as F,d as J}from"./playlist-f6556256.js";import{_ as O,v as $,u as j,m as z,a as r,J as X,o as G,M as H,b as d,c as a,d as s,e as o,f as t,U as m,t as c,F as h,h as v,g as p,w as y,j as g,i as Q,X as W,p as Y,k as Z}from"./index-bfcb45f6.js";import{g as tt,C as B}from"./CommentListItem-26660de9.js";const x=f=>(Y("data-v-72f0a484"),f=f(),Z(),f),et={class:"playdetail_container"},at={class:"top_content flex"},nt={class:"cover"},ot=["src"],st={class:"content"},lt={class:"flex align-center"},it={key:0,class:"fi fi-rr-lock",style:{"font-size":"20px","margin-right":"5px",color:"red"}},ct={class:"name onlyRowOne"},rt=["src"],_t={class:"ml20",style:{width:"fit-content"}},ut={key:1,class:"flex align-center mb20"},dt={class:"mr20"},mt={class:"mr20"},pt={key:2,class:"flex align-center mb20"},yt=x(()=>o("p",null,"标签：",-1)),gt={class:"description onlyRowMore",style:{"-webkit-line-clamp":"4"}},ft={class:"song_container"},ht=x(()=>o("p",{class:"baseTitle"},"热门评论",-1)),vt={key:0,class:""},kt=x(()=>o("p",{class:"baseTitle"},"最新评论",-1)),Ct={key:2,class:""},bt={__name:"detail",setup(f){const k=$(),I=j(),_=z(),e=r({}),u=r([]),C=r([]),b=r([]),w=r(!1),L=r("1");function S(){F({id:_.query.id}).then(n=>{console.log("歌单详情",n),e.value=n.playlist})}function D(){w.value=!0,J({id:_.query.id}).then(n=>{w.value=!1,u.value=n.songs})}function T(){window.localStorage.setItem("awaitList",JSON.stringify(u.value)),k.awaitPlayList=u.value}function U(n){I.push("/winnow/playlist")}function N(){console.log(e.value),I.push({path:"/userDetail",query:{id:e.value.creator.userId}})}function R(){tt({id:_.query.id,limit:50,offset:0,before:""}).then(n=>{console.log(n),C.value=n.hotComments,b.value=n.comments})}function V(n){L.value=n,n==="2"&&R()}return X(()=>_.query.id,n=>{n&&_.name==="playDetail"&&(u.value=[],S(),D())},{deep:!0}),G(()=>{S(),D(),document.querySelector(".playdetail_container").addEventListener("scroll",function(P){k.playlistTitle=P.target.scrollTop>300?e.value.name:""})}),H(()=>{k.playlistTitle=null}),(n,P)=>{const K=d("a-tag"),M=d("a-spin"),q=d("a-tab-pane"),A=d("a-empty"),E=d("a-tabs");return a(),s("div",et,[o("div",at,[o("section",nt,[t(e).coverImgUrl?(a(),s("img",{key:0,src:t(e).coverImgUrl+"?param=300y300",alt:""},null,8,ot)):m("",!0)]),o("div",st,[o("div",lt,[t(e).privacy===10?(a(),s("i",it)):m("",!0),o("p",ct,c(t(e).name),1)]),t(e).creator?(a(),s("div",{key:0,class:"user_content flex align-center pointer mb20",onClick:N},[o("img",{src:t(e).creator&&t(e).creator.avatarUrl+"?param=100y100",alt:""},null,8,rt),o("p",_t,c(t(e).creator&&t(e).creator.nickname),1)])):m("",!0),t(e).trackCount?(a(),s("div",ut,[o("p",dt,"歌曲数量："+c(t(e).trackCount),1),o("p",mt,"播放次数："+c(n.$formatPlayCount(t(e).playCount)),1),o("p",null,"分享次数："+c(t(e).shareCount),1)])):m("",!0),t(e).tags&&t(e).tags.length>0?(a(),s("div",pt,[yt,(a(!0),s(h,null,v(t(e).tags,(i,l)=>(a(),g(K,{class:"mr20 pointer",color:"cyan",key:l,onClick:wt=>U()},{default:y(()=>[Q(c(i),1)]),_:2},1032,["onClick"]))),128))])):m("",!0),o("p",gt,c(t(e).description),1)])]),p(E,{activeKey:t(L),onChange:V},{default:y(()=>[p(q,{key:"1",tab:"单曲"},{default:y(()=>[p(M,{spinning:t(w),tip:"正在加载中",class:"spin"},{default:y(()=>[o("div",ft,[(a(!0),s(h,null,v(t(u),(i,l)=>(a(),s("div",{key:l},[p(W,{"item-data":i,index:l,onChangeAwait:T},null,8,["item-data","index"])]))),128))])]),_:1},8,["spinning"])]),_:1}),p(q,{key:"2",tab:"评论"},{default:y(()=>[ht,t(C).length>0?(a(),s("div",vt,[(a(!0),s(h,null,v(t(C),(i,l)=>(a(),g(B,{"comment-item":i,key:l},null,8,["comment-item"]))),128))])):(a(),g(A,{key:1})),kt,t(b).length>0?(a(),s("div",Ct,[(a(!0),s(h,null,v(t(b),(i,l)=>(a(),g(B,{"comment-item":i,key:l},null,8,["comment-item"]))),128))])):(a(),g(A,{key:3}))]),_:1})]),_:1},8,["activeKey"])])}}},St=O(bt,[["__scopeId","data-v-72f0a484"]]);export{St as default};
